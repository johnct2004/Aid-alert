{% extends 'seller/base_seller.html' %}
{% load static %}

{% block page_title %}Profile{% endblock %}
{% block content_title %}Profile{% endblock %}

{% block seller_css %}
<link rel="stylesheet" href="{% static 'css/seller/seller_profile.css' %}">
{% endblock %}

{% block seller_content %}
<div class="dashboard-sections">
    <!-- Profile Overview -->
    <section class="glass-card content-card">
        <div class="card-header-row">
            <h2 class="card-title">Profile Overview</h2>
            <div class="profile-actions">
                <button class="btn-secondary edit-profile-btn">
                    <span class="material-icons-round">edit</span>
                    Edit
                </button>
                <button class="btn-primary save-profile-btn hidden">
                    <span class="material-icons-round">save</span>
                    Save Changes
                </button>
                <button class="btn-secondary cancel-profile-btn hidden">
                    <span class="material-icons-round">close</span>
                    Cancel
                </button>
            </div>
        </div>

        <div class="profile-overview">
            <div class="profile-avatar">
                <div class="avatar-large">
                    <span class="material-icons-round">store</span>
                </div>

            </div>

            <div class="profile-info">
                <div class="info-grid">
                    <div class="info-item">
                        <h3 class="info-label">Business Name</h3>
                        <p class="info-value" id="business-name">{{ user.first_name }} {{ user.last_name }} Supplies</p>
                        <input type="text" class="info-input hidden" id="business-name-input"
                            value="{{ user.first_name }} {{ user.last_name }} Supplies">
                    </div>
                    <div class="info-item">
                        <h3 class="info-label">Contact Person</h3>
                        <p class="info-value" id="contact-person">{{ user.first_name }} {{ user.last_name }}</p>
                        <div class="name-inputs hidden" style="display: none; gap: 10px;">
                            <input type="text" class="info-input" id="first-name-input" value="{{ user.first_name }}"
                                placeholder="First Name">
                            <input type="text" class="info-input" id="last-name-input" value="{{ user.last_name }}"
                                placeholder="Last Name">
                        </div>
                    </div>
                    <div class="info-item">
                        <h3 class="info-label">Email</h3>
                        <p class="info-value" id="email">{{ user.email }}</p>
                        <input type="email" class="info-input hidden" id="email-input" value="{{ user.email }}">
                    </div>
                    <div class="info-item">
                        <h3 class="info-label">Phone</h3>
                        <p class="info-value">{{ user.profile.phone|default:"Not Provided" }}</p>
                        <input type="tel" class="info-input hidden" id="phone-input"
                            value="{{ user.profile.phone|default:'' }}">
                    </div>
                    <div class="info-item">
                        <h3 class="info-label">Business ID</h3>
                        <p class="info-value">SELL-{{ user.id|stringformat:"06d" }}</p>
                    </div>
                    <div class="info-item">
                        <h3 class="info-label">Member Since</h3>
                        <p class="info-value">{{ user.date_joined|date:"F d, Y" }}</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Business Information -->
    <section class="glass-card content-card">
        <div class="card-header-row">
            <h2 class="card-title">Business Information</h2>
            <div class="business-actions">
                <button class="btn-secondary edit-business-btn">
                    <span class="material-icons-round">edit</span>
                    Edit Business
                </button>
                <button class="btn-primary save-business-btn hidden">
                    <span class="material-icons-round">save</span>
                    Save Changes
                </button>
                <button class="btn-secondary cancel-business-btn hidden">
                    <span class="material-icons-round">close</span>
                    Cancel
                </button>
            </div>
        </div>

        <div class="business-info">
            <div class="info-section">
                <h3 class="section-title">Company Details</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <h4 class="info-label">Company Name</h4>
                        <p class="info-value" id="company-name">{{ user.first_name }} {{ user.last_name }} Supplies</p>
                        <input type="text" class="info-input hidden" id="company-name-input"
                            value="{{ user.first_name }} {{ user.last_name }} Supplies">
                    </div>
                    <div class="info-item">
                        <h4 class="info-label">Business Type</h4>
                        <p class="info-value" id="business-type">Medical Equipment Supplier</p>
                        <select class="info-input hidden" id="business-type-input">
                            <option value="Medical Equipment Supplier" selected>Medical Equipment Supplier</option>
                            <option value="First Aid Supplies">First Aid Supplies</option>
                            <option value="Emergency Equipment">Emergency Equipment</option>
                            <option value="Medical Devices">Medical Devices</option>
                            <option value="Healthcare Products">Healthcare Products</option>
                        </select>
                    </div>
                    <div class="info-item">
                        <h4 class="info-label">Tax ID</h4>
                        <p class="info-value" id="tax-id">{{ user.id|stringformat:"010d" }}</p>
                        <input type="text" class="info-input hidden" id="tax-id-input" value="{{ user.id|stringformat:"
                            010d" }}">
                    </div>
                    <div class="info-item">
                        <h4 class="info-label">License Number</h4>
                        <p class="info-value" id="license-number">MED-LIC-{{ user.id|stringformat:"06d" }}</p>
                        <input type="text" class="info-input hidden" id="license-number-input"
                            value="MED-LIC-{{ user.id|stringformat:" 06d" }}">
                    </div>
                </div>
            </div>

            <div class="info-section">
                <h3 class="section-title">Address Information</h3>
                <div class="info-grid">

                    <div class="info-item">
                        <h4 class="info-label">City</h4>
                        <p class="info-value" id="city">{{ user.profile.city|default:"Not Provided" }}</p>
                        <input type="text" class="info-input hidden" id="city-input"
                            value="{{ user.profile.city|default:"" }}">
                    </div>
                    <div class="info-item">
                        <h4 class="info-label">State/Province</h4>
                        <p class="info-value" id="state">{{ user.profile.state|default:"Not Provided" }}</p>
                        <input type="text" class="info-input hidden" id="state-input"
                            value="{{ user.profile.state|default:"" }}">
                    </div>
                    <div class="info-item">
                        <h4 class="info-label">Postal Code</h4>
                        <p class="info-value" id="postal-code">{{ user.profile.postal_code|default:"Not Provided" }}</p>
                        <input type="text" class="info-input hidden" id="postal-code-input"
                            value="{{ user.profile.postal_code|default:"" }}">
                    </div>
                    <div class="info-item">
                        <h4 class="info-label">Country</h4>
                        <p class="info-value" id="country">{{ user.profile.country|default:"Not Provided" }}</p>
                        <input type="text" class="info-input hidden" id="country-input"
                            value="{{ user.profile.country|default:"" }}">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Account Settings -->
    <section class="glass-card content-card">
        <div class="card-header-row">
            <h2 class="card-title">Account Settings</h2>
        </div>

        <div class="settings-sections">
            <div class="settings-section">
                <h3 class="section-title">Security Settings</h3>
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 class="setting-title">Change Password</h4>
                            <p class="setting-description">Update your account password</p>
                        </div>
                        <a href="{% url 'aid_app:forgot_password' %}" class="btn-secondary setting-btn">
                            <span class="material-icons-round">lock</span>
                            Change Password
                        </a>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 class="setting-title">Two-Factor Authentication</h4>
                            <p class="setting-description">Add an extra layer of security</p>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="twoFactor" class="toggle-input">
                            <label for="twoFactor" class="toggle-label"></label>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 class="setting-title">Login Notifications</h4>
                            <p class="setting-description">Get notified on new login attempts</p>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="loginNotifications" class="toggle-input" checked>
                            <label for="loginNotifications" class="toggle-label"></label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-info">
                    <h4 class="setting-title" style="color: #dc3545;">Delete Account</h4>
                    <p class="setting-description">Permanently remove your account</p>
                </div>
                <button class="btn-secondary" style="color: #dc3545; border-color: #dc3545;"
                    onclick="showDeleteModal()">
                    <span class="material-icons-round">delete_forever</span>
                    Delete
                </button>
            </div>


            <div class="settings-section">
                <h3 class="section-title">Notification Preferences</h3>
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 class="setting-title">Email Notifications</h4>
                            <p class="setting-description">Receive updates via email</p>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="emailNotifications" class="toggle-input" checked>
                            <label for="emailNotifications" class="toggle-label"></label>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 class="setting-title">Order Notifications</h4>
                            <p class="setting-description">Alerts for new orders</p>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="orderNotifications" class="toggle-input" checked>
                            <label for="orderNotifications" class="toggle-label"></label>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 class="setting-title">Marketing Emails</h4>
                            <p class="setting-description">Promotional content and updates</p>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="marketingEmails" class="toggle-input">
                            <label for="marketingEmails" class="toggle-label"></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Account Actions -->
    <section class="glass-card content-card">
        <div class="card-header-row">
            <h2 class="card-title">Account Actions</h2>
        </div>

        <div class="account-actions-grid">
            <a href="{% url 'aid_app:seller_report' %}" class="action-btn">
                <span class="material-icons-round">history</span>
                <span>Sales Report</span>
            </a>
            <a href="{% url 'aid_app:contact' %}" class="action-btn">
                <span class="material-icons-round">support_agent</span>
                <span>Contact Support</span>
            </a>
        </div>
    </section>
</div>

<!-- Delete Account Modal -->
<div id="delete-account-modal" class="modal-overlay hidden"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
    <div class="glass-card modal-box"
        style="background: white; padding: 2rem; border-radius: 12px; text-align: center; max-width: 400px;">
        <h3 class="modal-title" style="color: #dc3545; margin-bottom: 1rem;">Delete Account</h3>
        <p class="modal-text" style="color: #333; margin-bottom: 2rem;">Are you sure you want to delete your account?
            This action cannot be undone.</p>
        <div class="modal-actions" style="display: flex; gap: 1rem; justify-content: center;">
            <button class="btn-secondary" onclick="hideDeleteModal()">Cancel</button>
            <form action="{% url 'aid_app:delete_seller_account' %}" method="POST" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn-primary"
                    style="background-color: #dc3545; border-color: #dc3545;">Delete</button>
            </form>
        </div>
    </div>
</div>

<script>
    function showDeleteModal() {
        const modal = document.getElementById('delete-account-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }

    function hideDeleteModal() {
        const modal = document.getElementById('delete-account-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
</script>




</div>
{% endblock %}

{% block seller_js %}
<script src="{% static 'js/seller/seller_profile.js' %}"></script>
{% endblock %}