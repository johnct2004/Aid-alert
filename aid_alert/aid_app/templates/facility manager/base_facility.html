{% extends 'common/base.html' %}
{% load static %}

{% block title %}{% block page_title %}Facility Dashboard{% endblock %} - Aid Alert{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/facility manager/facility_theme.css' %}">
{% block facility_css %}{% endblock %}
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Glass Sidebar -->
    <aside class="glass-sidebar">
        <div class="sidebar-header">
            <a href="{% url 'aid_app:facility_dashboard' %}" class="brand">
                <span class="material-icons-round brand-icon">health_and_safety</span>
                <span class="brand-text">Aid Alert</span>
            </a>
        </div>

        <ul class="menu">
            <li class="menu-item">
                <a href="{% url 'aid_app:facility_dashboard' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'facility_dashboard' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">dashboard</span>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="{% url 'aid_app:manage_kits' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'manage_kits' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">inventory_2</span>
                    <span>Manage Kits</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="{% url 'aid_app:stock_tracking' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'stock_tracking' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">show_chart</span>
                    <span>Stock Tracking</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="{% url 'aid_app:assign_responders' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'assign_responders' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">person_add</span>
                    <span>Assign Responders</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="{% url 'aid_app:facility_incident_log' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'facility_incident_log' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">article</span>
                    <span>Incident Log</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="{% url 'aid_app:facility_reports' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'facility_reports' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">analytics</span>
                    <span>Reports</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="{% url 'aid_app:facility_notifications' %}"
                    class="menu-link {% if request.resolver_match.url_name == 'facility_notifications' %}active{% endif %}">
                    <span class="material-icons-round menu-icon">notifications</span>
                    <span>Notifications</span>
                </a>
            </li>

            <li class="menu-item mt-auto">
                <a href="{% url 'aid_app:logout' %}" class="menu-link logout-link">
                    <span class="material-icons-round menu-icon">logout</span>
                    <span>Log Out</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Glass Top Bar -->
        <header class="glass-top-bar">
            <h1 class="page-title">{% block content_title %}{% endblock %}</h1>
            <a href="{% url 'aid_app:facility_profile' %}" class="user-profile-link">
                <div class="user-profile">
                    <span class="user-name">{{ user.username|default:"Facility Manager" }}</span>
                    <div class="avatar-circle">
                        <span class="material-icons-round">person</span>
                    </div>
                </div>
            </a>
        </header>

        <div class="content-wrapper">
            {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                <div class="alert glass-alert {{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            {% block facility_content %}{% endblock %}
        </div>
    </main>
</div>
{% endblock %}

{% block extra_js %}
{% block facility_js %}{% endblock %}
{% endblock %}