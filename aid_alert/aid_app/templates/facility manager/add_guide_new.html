{% extends 'facility manager/base_facility.html' %}
{% load static %}

{% block page_title %}First Aid Guide{% endblock %}
{% block content_title %}First Aid Guide{% endblock %}

{% block facility_css %}
<link rel="stylesheet" href="{% static 'css/facility manager/add_guide.css' %}">
{% endblock %}

{% block facility_content %}
<div class="form-container">
    <div class="glass-card" style="padding: 2rem;">
        <div style="margin-bottom: 2rem;">
            <h2
                style="font-size: 1.5rem; color: var(--text-dark); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.8rem;">
                <span class="material-icons-round" style="color: var(--primary-color);">post_add</span>
                Create New Guide
            </h2>
            <p style="color: #64748b;">Create a new first aid procedure guide for responders and users.</p>
        </div>

        <form method="POST" action="{% url 'aid_app:add_guide' %}">
            {% csrf_token %}

            <div class="form-group">
                <label for="title">Guide Title</label>
                <input type="text" id="title" name="title" class="glass-input" required
                    placeholder="e.g., Treating Snake Bites" autocomplete="off">
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="urgency">Urgency Level</label>
                    <select id="urgency" name="urgency" class="glass-select">
                        <option value="moderate">Moderate</option>
                        <option value="urgent">Urgent</option>
                        <option value="critical">Critical (Life-Threatening)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="icon">Icon Name</label>
                    <input type="text" id="icon" name="icon" class="glass-input" value="health_and_safety"
                        placeholder="e.g., healing" oninput="updateIconPreview(this.value)">
                    <div class="helper-text">
                        <span>Preview:</span>
                        <div class="preview-box">
                            <span class="material-icons-round" id="iconPreview">health_and_safety</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="steps">Procedure Steps</label>
                <textarea id="steps" name="steps" class="glass-textarea" required
                    placeholder="1. Keep the patient calm.&#10;2. Immobilize the affected area.&#10;3. Call emergency services immediately."></textarea>
                <p class="helper-text">
                    <span class="material-icons-round" style="font-size: 16px;">info</span>
                    Enter each step on a new line. Only clear, concise instructions recommended.
                </p>
            </div>

            <div class="actions-row">
                <a href="{% url 'aid_app:facility_dashboard' %}" class="btn-cancel">
                    Cancel
                </a>
                <button type="submit" class="btn-save">
                    <span class="material-icons-round">save</span>
                    Save Guide
                </button>
            </div>
        </form>
    </div>
</div>

<script src="{% static 'js/facility_manager/add_guide.js' %}"></script>
{% endblock %}