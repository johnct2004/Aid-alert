{% extends 'common/base.html' %}
{% load static %}

{% block title %}Register - Aid Alert{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/common/register.css' %}">
{% endblock %}

{% block content %}
<div class="register-container">
    <div class="glass-card register-card">
        <a href="{% url 'aid_app:home' %}" class="logo-text">AID ALERT</a>
        <h2 class="register-title">Create Account</h2>

        <!-- Display Django messages -->
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}

        <form action="{% url 'aid_app:register' %}" method="POST">
            {% csrf_token %}

            <div class="form-grid">
                <div class="input-group">
                    <label for="first_name">First Name</label>
                    <input type="text" id="first_name" name="first_name" class="glass-input" required>
                </div>

                <div class="input-group">
                    <label for="last_name">Last Name</label>
                    <input type="text" id="last_name" name="last_name" class="glass-input" required>
                </div>



                <div class="input-group">
                    <label for="phone">Phone Number</label>
                    <div class="phone-input-wrapper">
                        <select name="country_code" class="phone-prefix-select">
                            <option value="+91" selected>+91 (IN)</option>
                            <option value="+1">+1 (US)</option>
                            <option value="+44">+44 (UK)</option>
                            <option value="+61">+61 (AU)</option>
                            <option value="+81">+81 (JP)</option>
                        </select>
                        <input type="tel" id="phone" name="phone" placeholder="10-digit number" maxlength="10"
                            pattern="[0-9]{10}" required>
                    </div>
                    <small class="form-hint">Enter exactly 10 digits</small>
                </div>

                <div class="input-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender" class="glass-input">
                        <option value="" disabled selected>Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="input-group full-width">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" class="glass-input" required>
                </div>

                <div class="input-group full-width">
                    <label for="user_role">I am a...</label>
                    <select id="user_role" name="user_role" class="glass-input" required onchange="toggleRoleFields()">
                        <option value="" disabled selected>Select Your Role</option>
                        <option value="user">User (Seeker)</option>
                        <option value="seller">Seller (Marketplace)</option>
                        <option value="facility">Medical Facility</option>
                        <option value="responder">First Responder</option>
                    </select>
                </div>

                <!-- Seller Specific Fields -->
                <div id="seller_fields" class="role-specific-field" style="display: none; width: 100%;">
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="shop_name">Shop Name</label>
                            <input type="text" id="shop_name" name="shop_name" class="glass-input">
                        </div>
                        <div class="input-group">
                            <label for="license_no">License Number</label>
                            <input type="text" id="license_no" name="license_no" class="glass-input">
                        </div>
                    </div>
                </div>

                <!-- Facility Specific Fields -->
                <div id="facility_fields" class="role-specific-field" style="display: none; width: 100%;">
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="facility_name">Organization/Hospital Name</label>
                            <input type="text" id="facility_name" name="facility_name" class="glass-input">
                        </div>
                        <div class="input-group">
                            <label for="capacity">Capacity (Beds/Patients)</label>
                            <input type="number" id="capacity" name="capacity" class="glass-input" min="0">
                        </div>
                    </div>
                </div>



                <div class="input-group full-width">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" class="glass-input" required>
                    <div class="password-requirements">
                        <p class="requirements-title">Password must contain:</p>
                        <ul class="requirements-list">
                            <li>At least 8 characters</li>
                            <li>At least one uppercase letter</li>
                            <li>At least one lowercase letter</li>
                            <li>At least one number</li>
                        </ul>
                    </div>
                </div>

                <div class="input-group full-width">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" name="confirm_password" class="glass-input" required>
                </div>
            </div>

            <button type="submit" class="register-btn">Create Account</button>

            <div class="form-footer">
                <p>Already have an account? <a href="{% url 'aid_app:login' %}" class="sign-in">Sign in</a></p>
                <p style="margin-top: 10px;"><a href="{% url 'aid_app:contact' %}"
                        style="text-decoration: none; color: #555;">About Us</a></p>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/common/register.js' %}"></script>
{% endblock %}